{% extends 'main/base.html' %}

{% block title %}Бронирование зала{% endblock %}

{% block content %}

<style>
  .login-group {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .login-group p {
    display: flex;
    flex-direction: column;
  }
  .login-group input {
    width: 350px;
  }
</style>



<div class="mt-4">
    <h2>Забронировать зал</h2>
    <p class="text-center">1 час - 25000 ₽</p>
    <form method="post" id="booking-form" class="login-group">
        {% csrf_token %}
        {{ form.as_p }}
        <div id="price-info" class="mt-3 mb-3" style="font-weight: bold;">Цена бронирования: 0 ₽</div>
        <button type="submit" class="btn btn-primary">Забронировать</button>
    </form>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const durationInput = document.getElementById('id_duration');
    const fullDayCheckbox = document.getElementById('id_full_day');
    const equipmentCheckbox = document.getElementById('id_check_oborydovanie');
    const priceInfo = document.getElementById('price-info');

    function updatePrice() {
        let pricePerHour = 25000;
        let totalPrice = 0;

        // Основная стоимость
        if (fullDayCheckbox.checked) {
            totalPrice = pricePerHour * 10;
        } else {
            let duration = parseFloat(durationInput.value);
            if (!isNaN(duration) && duration > 0) {
                totalPrice = pricePerHour * duration;
            }
        }

        // Добавляем 10% за оборудование
        if (equipmentCheckbox && equipmentCheckbox.checked) {
            totalPrice = Math.round(totalPrice * 1.1);
        }

        // Обновляем отображение
        priceInfo.textContent = 'Цена бронирования: ' + totalPrice.toLocaleString('ru-RU') + ' ₽';
    }

    // Слушатели событий
    if (durationInput) {
        durationInput.addEventListener('input', updatePrice);
    }
    if (fullDayCheckbox) {
        fullDayCheckbox.addEventListener('change', updatePrice);
    }
    if (equipmentCheckbox) {
        equipmentCheckbox.addEventListener('change', updatePrice);
    }

    updatePrice(); // Инициализация при загрузке
});
</script>
{% endblock %}
